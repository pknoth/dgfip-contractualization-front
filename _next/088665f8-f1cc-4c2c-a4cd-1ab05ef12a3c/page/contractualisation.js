module.exports=__NEXT_REGISTER_PAGE("/contractualisation",function(){var e=webpackJsonp([11],{18:function(e,t,n){"use strict";var a=n(26);var r=n.n(a);var o=n(27);var l=n.n(o);var i=n(34);var s=n(11);s.defaults.adapter=r.a;var c={createUserEnrollment:function e(t,n){return s.post("https://courtier.particulier.api.gouv.fr"+"/api/enrollments/",t,{headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"}}).then(function(e){return e}).catch(function(e){alert(JSON.stringify(e.response.data));return e.response})},updateUserEnrollment:function e(t,n){return s.patch("https://courtier.particulier.api.gouv.fr"+"/api/enrollments/"+t.enrollment.id,t,{headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"}}).then(function(e){return e}).catch(function(e){alert(JSON.stringify(e.response.data));return e.response})},getUserEnrollment:function e(t,n){n=n||localStorage.getItem("token");return s.get("https://courtier.particulier.api.gouv.fr"+"/api/enrollments/"+t,{headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"}}).then(function(e){return e.data}).catch(function(e){alert(JSON.stringify(e.response.data));return e.response})},getUserEnrollments:function e(t){t=t||localStorage.getItem("token");return s.get("https://courtier.particulier.api.gouv.fr"+"/api/enrollments/",{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then(function(e){return e.data}).catch(function(e){alert(JSON.stringify(e.response.data));return e.response})},triggerUserEnrollment:function e(t,n){var a=localStorage.getItem("token");return s.patch("https://courtier.particulier.api.gouv.fr"+"/api/enrollments/"+n.id+"/trigger",{event:t,enrollment:n},{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then(function(e){return e}).catch(function(e){alert(JSON.stringify(e.response.data));return e.response})},deleteUserEnrollment:function e(t,n){return s.delete("https://courtier.particulier.api.gouv.fr"+"/api/enrollments/"+n,{headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then(function(e){return e}).catch(function(e){alert(JSON.stringify(e.response.data));return e.response})}};t["a"]=c},271:function(e,t,n){e.exports=n(272)},272:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=n(0);var r=n.n(a);var o=n(10);var l=n(27);var i=n.n(l);var s=n(60);var c=n(18);var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"===typeof t||"function"===typeof t)?t:e}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var _=function(e){p(t,e);function t(e){m(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={enrollment:{fournisseur_de_service:"",description_service:"",fondement_juridique:"",scope_dgfip_avis_imposition:true,scope_cnaf_attestation_droits:false,scope_cnaf_quotient_familial:true,nombre_demandes_annuelle:"",pic_demandes_par_heure:"",nombre_demandes_mensuelles_jan:"",nombre_demandes_mensuelles_fev:"",nombre_demandes_mensuelles_mar:"",nombre_demandes_mensuelles_avr:"",nombre_demandes_mensuelles_mai:"",nombre_demandes_mensuelles_jui:"",nombre_demandes_mensuelles_jul:"",nombre_demandes_mensuelles_aou:"",nombre_demandes_mensuelles_sep:"",nombre_demandes_mensuelles_oct:"",nombre_demandes_mensuelles_nov:"",nombre_demandes_mensuelles_dec:"",autorite_certification_nom:"",autorite_certification_fonction:"",date_homologation:"",date_fin_homologation:"",delegue_protection_donnees:"",validation_de_convention:false,certificat_pub_production:"",autorite_certification:""}};n.handleChange=n.handleChange.bind(n);n.handleSubmit=n.handleSubmit.bind(n);return n}u(t,[{key:"handleChange",value:function e(t){var n=t.target;var a="checkbox"===n.type?n.checked:n.value;var r=n.name;var o=Object.assign({},this.state);s["a"].deepSetInState(r,a,o);this.setState(o)}},{key:"handleSubmit",value:function e(t){var n=localStorage.getItem("token");var a=this.state;c["a"].createUserEnrollment(a,n).then(function(e){if(201===e.status)i.a.push("/demandes");else if(422===e.status)alert("Formulaire incomplet"+e.request.response);else if(401===e.status)alert("Vous n'êtes pas autorisé"+e);else alert("Erreur inconnue"+e)});t.preventDefault()}},{key:"render",value:function e(){var t=this.state.value;return r.a.createElement("div",{className:"main-pane"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h1",{id:"legal"},"Fondement juridique"),r.a.createElement("section",{className:"information-text"},r.a.createElement("p",null,"Pour pouvoir bénéficier du raccordement à l‘API Particulier, le cadre légal et réglementaire des fournisseurs de service doit permettre à la DINSIC de leur transmettre des données à caractère personnel.")),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"fournisseur_de_service"},"Nom du fournisseur de service"),r.a.createElement("input",{type:"text",onChange:this.handleChange,name:"enrollment.fournisseur_de_service",id:"fournisseur_de_service",value:t})),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"description_service"},"Décrivez brièvement votre service ainsi que l‘utilisation prévue des données transmises"),r.a.createElement("textarea",{onChange:this.handleChange,name:"enrollment.description_service",id:"description_service",value:t})),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"fondement_juridique"},"Veuillez transmettre le fondement juridique sur lequel s’appuie votre demande (décret, délibération …)"),r.a.createElement("textarea",{onChange:this.handleChange,name:"enrollment.fondement_juridique",id:"fondement_juridique",value:t})),r.a.createElement("h1",{id:"donnees"},"Choix des données"),r.a.createElement("section",{className:"information-text"},r.a.createElement("p",null,"Les règles relatives à la protection de la vie privée fixent les principes à respecter lors de la collecte, du traitement et de la conservation de données personnelles. Les données ainsi récoltées doivent être adéquates, pertinentes et proportionnelles par rapport au traitement."),r.a.createElement("p",null,"Nous vous remercions de sélectionner uniquement les données strictement nécessaires à votre téléservice. Le non-respect de ces règles vous expose vis à vis de la CNIL.")),r.a.createElement("div",{className:"form__group"},r.a.createElement("fieldset",{className:"vertical"},r.a.createElement("legend",null,"Sélectionnez vos jeux de données souhaités"),r.a.createElement("div",null,r.a.createElement("input",{onChange:this.handleChange,checked:this.state.scope_dgfip_avis_imposition,type:"checkbox",name:"enrollment.scope_dgfip_avis_imposition",id:"checkbox-scope_dgfip_avis_imposition",value:"true"}),r.a.createElement("label",{htmlFor:"checkbox-scope_dgfip_avis_imposition",className:"label-inline"},"DGFiP - Avis Imposition")),r.a.createElement("div",null,r.a.createElement("input",{onChange:this.handleChange,checked:this.state.scope_cnaf_attestation_droits,type:"checkbox",name:"enrollment.scope_cnaf_attestation_droits",id:"checkbox-scope_cnaf_attestation_droits",value:"scope_cnaf_attestation_droits"}),r.a.createElement("label",{htmlFor:"checkbox-scope_cnaf_attestation_droits",className:"label-inline"},"CNAF - Attestation de droits")),r.a.createElement("div",null,r.a.createElement("input",{onChange:this.handleChange,checked:this.state.scope_cnaf_quotient_familial,type:"checkbox",name:"enrollment.scope_cnaf_quotient_familial",id:"checkbox-scope_cnaf_quotient_familial",value:"true"}),r.a.createElement("label",{htmlFor:"checkbox-scope_cnaf_quotient_familial",className:"label-inline"},"CNAF - Quotient Familial")))),r.a.createElement("h1",{id:"volumetrie"},"Volumétrie"),r.a.createElement("section",{className:"information-text"},r.a.createElement("p",null,"Avoir une information de la volumétrie et, le cas échéant à la saisonnalité de votre démarche, nous permettra de vous offrir la meilleure qualité de service possible en lien avec les différents fournisseurs de vos données."),r.a.createElement("p",null,"Conformément à nos ",r.a.createElement("a",{href:"#convention"},"conditions d’utilisation"),", nous nous réservons le droit de réduire ou couper vos appels.")),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"nombre_demandes_annuelle"},"Connaissez-vous le volume global annuel des demandes de votre téléservice ?"),r.a.createElement("input",{type:"text",onChange:this.handleChange,name:"enrollment.nombre_demandes_annuelle",id:"nombre_demandes_annuelle",value:t})),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"pic_demandes_par_heure"},"Connaissez-vous le pic de charge (en nombre de demandes horaires) ?"),r.a.createElement("input",{type:"text",onChange:this.handleChange,name:"enrollment.pic_demandes_par_heure",id:"pic_demandes_par_heure",value:t})),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"pic_demandes_par_heure"},"Connaissez-vous la répartition de la charge des demandes mensuelles (0 si le service est fermé) ?"),r.a.createElement("pre",null,r.a.createElement("code",null,"‘nombre_demandes_mensuelles_jan‘: 45, ‘nombre_demandes_mensuelles_fev‘: 45, ‘nombre_demandes_mensuelles_mar‘: 45, ‘nombre_demandes_mensuelles_avr‘: 45, ‘nombre_demandes_mensuelles_mai‘: 45, ‘nombre_demandes_mensuelles_jui‘: 45, ‘nombre_demandes_mensuelles_jul‘: 45, ‘nombre_demandes_mensuelles_aou‘: 45, ‘nombre_demandes_mensuelles_sep‘: 45, ‘nombre_demandes_mensuelles_oct‘: 45, ‘nombre_demandes_mensuelles_nov‘: 45, ‘nombre_demandes_mensuelles_dec‘: 45,"))),r.a.createElement("h1",{id:"cnil"},"Obligation CNIL"),r.a.createElement("section",{className:"information-text"},r.a.createElement("p",null,"L’entrée en vigueur le 25 mai 2018 du règlement européen sur la protection des données supprime totalement le régime déclaratif."),r.a.createElement("p",null,"Les fournisseurs de services ont en particulier l’obligation de tenir un registre de leurs activités de traitement, d’encadrer les opérations sous-traitées dans les contrats de prestation de services, de formaliser des politiques de confidentialité des données et des procédures relatives à la gestion des demandes d’exercice des droits."),r.a.createElement("p",null,"La désignation d’un délégué à la protection des données devient obligatoire pour les organismes et autorités publics, et donc pour les fournisseurs de services.")),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"delegue_protection_donnees"},"Délégué·e à la protection des données"),r.a.createElement("input",{type:"text",onChange:this.handleChange,name:"enrollment.delegue_protection_donnees",id:"delegue_protection_donnees",value:t})),r.a.createElement("div",{className:"form__group"},r.a.createElement("input",{type:"checkbox",name:"enrollment.checkbox-cnil",id:"checkbox-cnil"}),r.a.createElement("label",{htmlFor:"checkbox-cnil",className:"label-inline"},"Je déclare avoir accompli mes démarches CNIL en accord avec le règlement général de protection des données")),r.a.createElement("h1",{id:"convention"},"Convention"),r.a.createElement("section",{className:"information-text"},r.a.createElement("p",null,"Merci de prendre connaissance de la convention d’adhésion d’API Particulier afin de demander un jeton d’accès en décrivant votre projet.")),r.a.createElement("iframe",{src:"static/docs/charte.pdf",width:"100%",height:"800px"}),r.a.createElement("div",{className:"form__group"},r.a.createElement("input",{onChange:this.handleChange,checked:this.state.validation_de_convention,type:"checkbox",name:"enrollment.validation_de_convention",id:"validation_de_convention"}),r.a.createElement("label",{htmlFor:"validation_de_convention",className:"label-inline"},"Je valide la présente convention")),r.a.createElement("div",{className:"button-list"},r.a.createElement("button",{className:"button",type:"submit",name:"subscribe",id:"submit"},"Soumettre la demande"))))}}]);return t}(r.a.Component);var f=_;var h=n(91);var v=function e(){return r.a.createElement(o["a"],null,r.a.createElement("div",{className:"documentation"},r.a.createElement(h["a"],null),r.a.createElement(f,null)))};var b=t["default"]=v},91:function(e,t,n){"use strict";var a=n(0);var r=n.n(a);var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"===typeof t||"function"===typeof t)?t:e}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=n(11);var m=function(e){c(t,e);function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={enrollment:{acl:{}}};return n}l(t,[{key:"componentDidMount",value:function e(){var t=this;var n=this.props.id;var a=void 0;if("undefined"===typeof localStorage?"undefined":o(localStorage))a=localStorage.getItem("token");if(n)u.get("https://courtier.particulier.api.gouv.fr"+"/api/enrollments/"+n,{headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then(function(e){t.setState({enrollment:e.data})})}},{key:"render",value:function e(){var t=this.state.enrollment;return r.a.createElement("nav",{className:"side-pane"},r.a.createElement("ul",{className:"side-pane__menu"},r.a.createElement("li",{className:"side-pane__title"},r.a.createElement("h3",null,"Contractualisation")),r.a.createElement("li",null,r.a.createElement("a",{className:"side-pane__link",href:"#legal"},"Fondement juridique")),r.a.createElement("li",null,r.a.createElement("a",{className:"side-pane__link",href:"#donnees"},"Choix des données")),r.a.createElement("li",null,r.a.createElement("a",{className:"side-pane__link",href:"#volumetrie"},"Volumétrie")),r.a.createElement("li",null,r.a.createElement("a",{className:"side-pane__link",href:"#cnil"},"Obligation CNIL")),r.a.createElement("li",null,r.a.createElement("a",{className:"side-pane__link",href:"#convention"},"Convention"))),t.acl.show_technical_inputs&&r.a.createElement("ul",{className:"side-pane__menu"},r.a.createElement("li",{className:"side-pane__title"},r.a.createElement("h3",null,"Entrants Techniques")),r.a.createElement("li",null,r.a.createElement("a",{className:"side-pane__link",href:"#entrants-techniques"},"Entrants tehniques")),r.a.createElement("li",null,r.a.createElement("a",{className:"side-pane__link",href:"#homologation-securite"},"Homologation de sécurité")),r.a.createElement("li",null,r.a.createElement("a",{className:"side-pane__link",href:"#recette-fonctionnelle"},"Recette fonctionnelle"))))}}]);return t}(r.a.Component);t["a"]=m}},[271]);return{page:e.default}});